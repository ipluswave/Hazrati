-# Hide header in map view if mobile
%header.header.header-normal.responsive-type1#header
  .header-wrapper.wrapper-fulid.header-body
    .header-right.header-padding.visible-tablet
      = link_to t("homepage.index.post_new_listing"), new_listing_path, :class => "new-listing-link", :id => "new-listing-link"

    .header-right.visible-tablet
      #header-menu-desktop-anchor.header-menu-container.toggle.hidden{data: {toggle: '#header-menu-toggle-menu', 'toggle-position' => 'absolute'}}

    - if logged_in
      .header-right
        = render :partial => "layouts/header_anchors", locals: {avatar_url: avatar_url, current_user_name: current_user_name, icons: icons}
        = render :partial => "layouts/header_user_menu", locals: {unread_count: unread_count, inbox_path: inbox_path, profile_path: profile_path, manage_listings_path: manage_listings_path, settings_path: settings_path, logout_path: logout_path, icons: icons}

      = render :partial => "layouts/header_right_visible_tablet", locals: {unread_count: unread_count, inbox_path: inbox_path, icons: icons}

    - if available_locales.size > 1
      .header-right.visible-desktop
        #header-locales-menu.toggle.header-hover{data: {toggle: '#header-locales-toggle-menu', 'toggle-position' => 'absolute'}}
          %span.header-text-link
            = current_locale_name
            = icon_map_tag(icons, "dropdown", ["icon-dropdown"])
        #header-locales-toggle-menu.toggle-menu.header-toggle-menu-language.hidden
          = render :partial => "layouts/locale_select", :collection => available_locales, :as => :loc_array, locals: {return_after_locale_change: return_after_locale_change}

    - unless logged_in
      .header-right
        = link_to login_path, class: "header-text-link header-hover", id: "header-login-link" do
          = t("header.login")
      .header-right
        = link_to sign_up_path, class: "header-text-link header-hover" do
          = t("header.signup")

    .header-left.hidden-tablet
      .header-menu-container.toggle.hidden{data: {toggle: '#header-menu-toggle-menu', 'toggle-position' => 'absolute'}}
        #header-menu-mobile-anchor.header-menu-toggle-container.toggle-header-container
          = icon_map_tag(icons, "rows", ["pesto-icon-menu"])
          %span.visible-tablet-inline
            = t("header.menu")

    = render :partial => "layouts/header_menu", locals: { return_after_locale_change: return_after_locale_change, available_locales: available_locales, icons: icons}

    .header-row.wrapper-fulid
      .header-table
        .header-column.logo
          .header-logo
            %a{:href => '/'}
              %img{:src => 'assets/theme/logo.png', :alt => 'HAZRATI'}
    - if @show_categories && search_params && search_path
      .header-main
        .header-column.menu
          .collapse.header-main-nav#main-nav
            %nav.navbar.navbar-default
              %ul.nav.navbar-nav
                - @main_categories.each do |category|
                  - show_subcategories = 1==1
                  - if category.children
                    %li.dropdown.classic
                      = link_to category.display_name(I18n.locale), search_path(search_params.merge({category: category})), :class => "home-categories-main #{if show_subcategories then 'selected' end} #{if category.has_subcategories? then 'has-subcategories' end}", :data => {category: category.id}
                      - if show_subcategories
                        %ul.dropdown-menu
                          - category.children.each do |child|
                            %li
                              - is_selected = selected_category == child
                              = link_to child.display_name(I18n.locale), search_path(search_params.merge({category: child})), :class => "home-categories-sub #{if is_selected then 'selected' end}", :data => {:"sub-category" =>child.id}
                  - else
                    %li.selfitem
                      = link_to category.display_name(I18n.locale), search_path(search_params.merge({category: category})), :class => "home-categories-main #{if show_subcategories then 'selected' end} #{if category.has_subcategories? then 'has-subcategories' end}", :data => {category: category.id}